AFRAME.registerComponent('sunfield', {
  schema: {
    width: {type: 'number'},
    height: {type: 'number'},
  },

  init: function () {
    const el = this.el;
    const dat = this.data;
    const h = this.el.getAttribute('height');
    const w = this.el.getAttribute('width');
    const loader = new THREE.GLTFLoader();
    var flwrs = [];

    if(!h){
      h = dat.height;
    }
    if(!w){
      w = dat.width;
    }

    loader.load(
      'client/models/sunf1.gltf',

      function(gltf){
	const scene = gltf.scene;
	const mesh = scene.children[1];
	for(var i = 0; i < h*w; i++){
	  const flnm = 'flower'+i;
	  mesh.position.set(i, (i%w), -4);
	  el.setObject3D(flnm, mesh);
	}
      }
    );    
  }
});
